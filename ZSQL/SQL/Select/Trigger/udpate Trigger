create or replace TRIGGER "XXNARESCO"."XXSC_APPLICATION_HEADERS_TRG" AFTER
 
  UPDATE OF APPROVAL_STATUS ON XXSC_CERTIFICATION_HEADERS
  FOR EACH ROW
  DECLARE
  P_APPL_HEADER_ID NUMBER;
  P_APPROVAL_STATUS VARCHAR2(30);
  BEGIN
      P_APPROVAL_STATUS  := :NEW.APPROVAL_STATUS;
--    dbms_output.put_line('CERT_HEADER_ID : '||:NEW.CERT_HEADER_ID||', APPROVAL_STATUS : '||:NEW.APPROVAL_STATUS);
   
      IF :NEW.APPROVAL_STATUS = 'APR' THEN
--      dbms_output.put_line('P_APPL_HEADER_ID : '||:NEW.APPL_HEADER_ID);
          UPDATE XXSC_PAY_APPL_HEADERS
          SET APP_STATUS='Y',
              APPROVAL_STATUS='APR'
          WHERE APPL_HEADER_ID=:NEW.APPL_HEADER_ID;
--      dbms_output.put_line('Value updated ');
      END IF;
   EXCEPTION WHEN OTHERS THEN
      dbms_output.put_line('Error in Trigger XXSC_APPLICATION_HEADERS_TRG :  '||SQLERRM);
END XXSC_APPLICATION_HEADERS_TRG;
